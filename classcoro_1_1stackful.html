<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libcoro: coro::stackful&lt; segment_size &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libcoro
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">Coroutine support library for C++20</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacecoro.html">coro</a></li><li class="navelem"><a class="el" href="classcoro_1_1stackful.html">stackful</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="classcoro_1_1stackful-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">coro::stackful&lt; segment_size &gt; Class Template Reference<div class="ingroups"><a class="el" href="group__allocators.html">Allocators</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Coroutine allocator emulates coroutine's stack to achieve stackful behaviour.  
 <a href="classcoro_1_1stackful.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="stackful_8h_source.html">stackful.h</a>&gt;</code></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;std::size_t segment_size = 8192&gt;<br />
class coro::stackful&lt; segment_size &gt;</h3>

<p>Coroutine allocator emulates coroutine's stack to achieve stackful behaviour. </p>
<p>Allocator is passed to the coroutine as first argument. It is always carried as value, so it must be copied. However the allocator acts as shared pointer, so copying is sharing. The allocator manages coroutine's stack, every called sub-coroutine can use the same stack. You only need to pass the instance to every sub-coroutine.</p>
<p>The stack is managed similar way as stack in GO language. It is allocated in segments. Everytime new coroutine is called, its frame is allocated in a segment. If there is no more space, new segment is allocated from the heap. When coroutine exits, the memory is released.</p>
<p>It is expected, that memory allocation is performed in reverse order then allocation. However sometimes can happen that order of deallocation of topmost frames is reversed. This situation is handled correctly, however the out of order deallocation doesn't free memory until top of the stack is released reaching the out of order deallocated block.</p>
<ul>
<li>Note, the class is not MT safe, it is expecteded, that coroutines allocated on this stack are not resumed concurently. You need to create new stack for such coroutine.</li>
</ul>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">segment_size</td><td>size of segment and initial stack size </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="stackful_8h_source.html#l00041">41</a> of file <a class="el" href="stackful_8h_source.html">stackful.h</a>.</p>
</div><hr/>The documentation for this class was generated from the following file:<ul>
<li>src/coro/<a class="el" href="stackful_8h_source.html">stackful.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun May 5 2024 12:01:03 for libcoro by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
